<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/polymer-ui-accordion/polymer-ui-accordion.html">
<link rel="import" href="../../bower_components/polymer-ui-collapsible/polymer-ui-collapsible.html">
<link rel="import" href="../ztop-chart-line/ztop-chart-line.html">
<link rel="import" href="../ztop-percent-indicator-vertical/ztop-percent-indicator-vertical.html">
<link rel="import" href="../ztop-process-cpu-info/ztop-process-cpu-info.html">
<link rel="import" href="../ztop-process-disk-info/ztop-process-disk-info.html">
<link rel="import" href="../ztop-process-network-info/ztop-process-network-info.html">
<link rel="import" href="../ztop-web-socket/ztop-web-socket.html">
 
<polymer-element name="ztop-overview">
  <template>
    <style>
      :host {
        display: block;
      }

      polymer-ui-collapsible {
        border: 1px solid #ddd;
        border-radius: 3px;
        margin-bottom: 2px;
      }

      polymer-ui-collapsible > :not(header) {
        max-height: 200px;
        overflow-y: scroll;
      }

      ztop-percent-indicator-vertical {
        vertical-align: text-bottom;
      }

      ztop-chart-line {
        background-color: black;
      }

      .wrapper {
        display: flex;
      }

      .wrapper > * {
        margin: 5px;
      }

      .flex {
        flex: 1;
      }

      .polymer-ui-collapsible-header {
        background: url(assets/down-arrow-circle.png) no-repeat right;
        border-bottom: 1px solid #bcbcbc;
        cursor: pointer;
        display: flex;
        padding: 10px;
        padding-right: 40px;
      }

      .polymer-selected > .polymer-ui-collapsible-header {
        background: url(assets/up-arrow-circle.png) no-repeat right;
      }

      .polymer-ui-collapsible-header > span {
        flex: 1;
      }

      .title {
        font-weight: bold;
      }
    </style>

    <ztop-web-socket data="{{processData}}"></ztop-web-socket>

    <div class="wrapper">
      <polymer-ui-accordion multi selected="0" class="flex">
        <polymer-ui-collapsible>
          <header class="polymer-ui-collapsible-header">
            <span class="title">
              CPU
            </span>
            <span>
              <ztop-percent-indicator-vertical percent="{{cpuUsage}}"></ztop-percent-indicator-vertical> {{cpuUsage}}% CPU Usage
            </span>
            <span>
              <ztop-percent-indicator-vertical percent="{{maximumFrequency}}"></ztop-percent-indicator-vertical> {{maximumFrequency}}% Maximum Frequency
            </span>
          </header>
          <ztop-process-cpu-info cpuUsage="{{cpuUsage}}" maximumFrequency="{{maximumFrequency}}" processData="{{processData}}"></ztop-process-cpu-info>
        </polymer-ui-collapsible>

        <polymer-ui-collapsible>
          <header class="polymer-ui-collapsible-header">
            <span class="title">
              Disk
            </span>
            <span>
              <ztop-percent-indicator-vertical percent="{{diskIo}}"></ztop-percent-indicator-vertical> {{diskIo}} KB/sec Disk I/O
            </span>
            <span>
              <ztop-percent-indicator-vertical percent="{{highestActiveTime}}"></ztop-percent-indicator-vertical> {{highestActiveTime}}% Highest Active Time
            </span>
          </header>
          <ztop-process-disk-info diskIo="{{diskIo}}" highestActiveTime="{{highestActiveTime}}" processData="{{processData}}"></ztop-process-disk-info>
        </polymer-ui-collapsible>

        <polymer-ui-collapsible>
          <header class="polymer-ui-collapsible-header">
            <span class="title">
              Network
            </span>
            <span>
              <ztop-percent-indicator-vertical percent="{{networkIo}}"></ztop-percent-indicator-vertical> {{networkIo}} Kbps Network I/O
            </span>
            <span>
              <ztop-percent-indicator-vertical percent="{{networkUtilization}}"></ztop-percent-indicator-vertical> {{networkUtilization}}% Network Utilization
            </span>
          </header>
          <ztop-process-network-info networkIo="{{networkIo}}" networkUtilization="{{networkUtilization}}" processData="{{processData}}"></ztop-process-network-info>
        </polymer-ui-collapsible>
      </polymer-ui-accordion>
      <div>
        <ztop-chart-line height="100" width="150" minX="0" minY="0" maxX="59" maxY="100" points="{{cpuPoints}}"></ztop-chart-line>
      </div>
    </div>
  </template>
  <script>
    Polymer('ztop-overview', {
      cpuPoints: {
        x: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59],
        y: [10, 8, 11, 15, 20, 26, 30, 40, 50, 58, 63, 64, 70, 80, 95, 94, 95, 95, 93, 90, 84, 78, 70, 60, 47, 44, 43, 45, 47, 46, 44, 43, 43, 44, 45, 50, 44, 40, 32, 20, 21, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40]
      }
    });
  </script>
</polymer-element>
 